
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Shipl API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#general" class="toc-h1 toc-link" data-title="General">General</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#request-phone-verification" class="toc-h2 toc-link" data-title="Request phone verification">Request phone verification</a>
                  </li>
                  <li>
                    <a href="#verify-and-request-token" class="toc-h2 toc-link" data-title="Verify and Request Token">Verify and Request Token</a>
                  </li>
                  <li>
                    <a href="#create-proxy-contract-for-you-users" class="toc-h2 toc-link" data-title="Create proxy contract for you users">Create proxy contract for you users</a>
                  </li>
                  <li>
                    <a href="#lookup-for-user-proxy-contracts" class="toc-h2 toc-link" data-title="Lookup for user proxy contracts">Lookup for user proxy contracts</a>
                  </li>
                  <li>
                    <a href="#relay-meta-transaction" class="toc-h2 toc-link" data-title="Relay meta-transaction">Relay meta-transaction</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#shipl-sdk" class="toc-h1 toc-link" data-title="Shipl SDK">Shipl SDK</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#getting-started" class="toc-h2 toc-link" data-title="Getting Started">Getting Started</a>
                  </li>
                  <li>
                    <a href="#parties-involved" class="toc-h2 toc-link" data-title="Parties involved">Parties involved</a>
                  </li>
                  <li>
                    <a href="#installation" class="toc-h2 toc-link" data-title="Installation">Installation</a>
                  </li>
                  <li>
                    <a href="#usage" class="toc-h2 toc-link" data-title="Usage">Usage</a>
                  </li>
                  <li>
                    <a href="#examples" class="toc-h2 toc-link" data-title="Examples">Examples</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Shipl API! You can use our API to process, to verify users, create users proxy-contract, process meta-tx and pay ethereum gas cost on behalf of the users of your dApp.</p>

<p>The Shipl API is organized around REST. Our API has predictable, resource-oriented URLs, and uses HTTP response codes to indicate API errors. We use built-in HTTP features, like HTTP authentication and HTTP verbs, which are understood by off-the-shelf HTTP clients. JSON is returned by all API responses, including errors. </p>

<p>To explore the API as much as possible, we offer testnets environment on rinkeby, kovan and ropsten in addition to the mainnet (mainnet not available yet). Any transfers made in the test environment will never hit the mainnet network or incur any fees. Both testnets and mainnet rely on API keys for authentication.</p>

<p>Be sure to subscribe to Shipl&#39;s API announce mailing list to receive information on new additions and changes to Shipl&#39;s API and language libraries.</p>

<aside class="notice">
The API is in alpha stage, so features like developer accounts or users management are not yet available but should come before the end of January 2019.
</aside>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>Make sure to replace <code>AUTH_TOKEN</code> with your JWT auth token.</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: Bearer AUTH_TOKEN"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">Shipl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fuel-web3-provider'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">readline</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'readline-sync'</span><span class="p">)</span> <span class="c1">// Callback to ask for the user phone number if the user isn't verified</span>

<span class="kr">const</span> <span class="nx">shipl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shipl</span><span class="p">({</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="na">network</span><span class="p">:</span> <span class="s1">'rinkeby'</span> <span class="p">})</span>
<span class="kr">const</span> <span class="p">{</span> <span class="nx">identity</span><span class="p">,</span> <span class="nx">deviceKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">shipl</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">readline</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
</code></pre>
<p>Shipl uses JWT token to allow access to the API. Shipl expects to auth token to be included in all secured API requests to the server in a header that looks like the following:</p>

<p><code>Authorization: Bearer AUTH_TOKEN</code></p>

<p>The JWT token is generated from the following control flow:</p>

<ol>
<li><p>The user submits their phone number and recieves a text with a secret</p></li>
<li><p>Upon successful completion, a JWT token is created and then signed by the nisaba service (becoming a &#39;nisaba token&#39; as referenced in the comments in the code</p></li>
<li><p>This token is associated with the user and allows them to use the methods of the API and make calls</p></li>
</ol>

<p>The login method of the Shipl SDK handle the creation/verifcation of the user and the usage of the auth token. You just have to pass a callback function to ask for the phone number and then the code verifcation.</p>
<h1 id='errors'>Errors</h1>
<p>Shipl uses conventional HTTP response codes to indicate the success or failure of an API request. In general: Codes in the 2xx range indicate success. Codes in the 4xx range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.). Codes in the 5xx range indicate an error with Shipl&#39;s servers (these are rare).</p>

<p>Some 4xx errors that could be handled programmatically include an error code that briefly explains the error reported.</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK -- Everything worked as expected.</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request -- The request was unacceptable, often due to missing a required parameter or not JSON</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- No nisaba token</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Nisaba token missing or invalid</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified path could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access an endpoint with an invalid method.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many transactions! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>
<h1 id='general'>General</h1><h2 id='request-phone-verification'>Request phone verification</h2>
<p>Starts a verification for a deviceKey and a phoneNumber. Sends a code thru SMS or Call</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.shipl.co/nisaba/verify</code></p>
<h3 id='body-parameters'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>deviceKey</td>
<td>The ethereum address of the user to verify</td>
</tr>
<tr>
<td>phoneNumber</td>
<td>The phone number of the user to verify</td>
</tr>
</tbody></table>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.shipl.co/nisaba/verify"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">Shipl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fuel-web3-provider'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">readline</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'readline-sync'</span><span class="p">)</span> <span class="c1">// Callback to ask for the user phone number if the user isn't verified</span>

<span class="kr">const</span> <span class="nx">shipl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shipl</span><span class="p">({</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="na">network</span><span class="p">:</span> <span class="s1">'rinkeby'</span> <span class="p">})</span>
<span class="kr">const</span> <span class="p">{</span> <span class="nx">identity</span><span class="p">,</span> <span class="nx">deviceKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">shipl</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">readline</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='verify-and-request-token'>Verify and Request Token</h2>
<p>With the code (which was sent thru SMS) the app can verify it and request the pseudo-attestation token</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://api.shipl.co/nisaba/check</code></p>
<h3 id='body-parameters-2'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>deviceKey</td>
<td>The ethereum address of the user to verify</td>
</tr>
<tr>
<td>code</td>
<td>The code number received by the user at the previous step</td>
</tr>
</tbody></table>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://api.shipl.co/nisaba/check"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">Shipl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fuel-web3-provider'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">readline</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'readline-sync'</span><span class="p">)</span> <span class="c1">// Callback to ask for the user phone number if the user isn't verified</span>

<span class="kr">const</span> <span class="nx">shipl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shipl</span><span class="p">({</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="na">network</span><span class="p">:</span> <span class="s1">'rinkeby'</span> <span class="p">})</span>
<span class="kr">const</span> <span class="p">{</span> <span class="nx">identity</span><span class="p">,</span> <span class="nx">deviceKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">shipl</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">readline</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;jwt&gt;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='create-proxy-contract-for-you-users'>Create proxy contract for you users</h2>
<p>Calls the MetaIdentityManager contract to create the initial controller and proxy contract. The proxy contract is configured to be controlled by the deviceKey. The identity factory is called in the blockchain specified by blockchain body data. If Shipl does not know how to access the blockchain it returns a 404 status.</p>

<p>The endpoint is private, only valid &quot;nisaba tokens&quot; are allowed.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST https://api.shipl.co/unnu/createidentity</code></p>
<h3 id='header'>Header</h3>
<p><code>Authorization: Bearer &lt;jwt nisaba token&gt;</code></p>
<h3 id='body-parameters-3'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>deviceKey</td>
<td>The ethereum address of the user to verify</td>
</tr>
<tr>
<td>recoveryKey</td>
<td>By default it&#39;s a Shipl key</td>
</tr>
<tr>
<td>blockchain</td>
<td>Rinkeby, Ropsten or Kovan</td>
</tr>
<tr>
<td>managerType</td>
<td>MetaIdentityManager</td>
</tr>
</tbody></table>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.shipl.co/unnu/createidentity"</span>
  -H Authorization: Bearer &lt;jwt nisaba token&gt;
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">Shipl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fuel-web3-provider'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">readline</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'readline-sync'</span><span class="p">)</span> <span class="c1">// Callback to ask for the user phone number if the user isn't verified</span>

<span class="kr">const</span> <span class="nx">shipl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shipl</span><span class="p">({</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="na">network</span><span class="p">:</span> <span class="s1">'rinkeby'</span> <span class="p">})</span>
<span class="kr">const</span> <span class="p">{</span> <span class="nx">identity</span><span class="p">,</span> <span class="nx">deviceKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">shipl</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">readline</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"managerType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MetaIdentityManager"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"managerAddress"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;address&gt;</span><span class="p">,</span><span class="w">
  </span><span class="s2">"txHash"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;tx</span><span class="w"> </span><span class="err">hash&gt;</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><h2 id='lookup-for-user-proxy-contracts'>Lookup for user proxy contracts</h2>
<p>Look for a proxy contract created by a deviceKey.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST https://api.shipl.co/unnu/lookup</code></p>
<h3 id='header-2'>Header</h3>
<p><code>Authorization: Bearer &lt;jwt nisaba token&gt;</code></p>
<h3 id='body-parameters-4'>Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>deviceKey</td>
<td>The ethereum address of the user to verify</td>
</tr>
</tbody></table>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.shipl.co/unnu/lookup"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">Shipl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fuel-web3-provider'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">readline</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'readline-sync'</span><span class="p">)</span> <span class="c1">// Callback to ask for the user phone number if the user isn't verified</span>

<span class="kr">const</span> <span class="nx">shipl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shipl</span><span class="p">({</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="na">network</span><span class="p">:</span> <span class="s1">'rinkeby'</span> <span class="p">})</span>
<span class="kr">const</span> <span class="p">{</span> <span class="nx">identity</span><span class="p">,</span> <span class="nx">deviceKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">shipl</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">readline</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"managerType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MetaIdentityManager"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"managerAddress"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;address&gt;</span><span class="p">,</span><span class="w">
  </span><span class="s2">"identity"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;identity</span><span class="w"> </span><span class="err">address&gt;</span><span class="p">,</span><span class="w">
  </span><span class="s2">"blockchain"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;blockchain</span><span class="w"> </span><span class="err">name&gt;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='relay-meta-transaction'>Relay meta-transaction</h2><h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST https://api.shipl.co/sensui/relay</code></p>
<h4 id='header-3'>Header</h4><pre class="highlight plaintext"><code>Authorization: Bearer &lt;jwt nisaba token&gt;
</code></pre><h4 id='body-parameters-5'>Body Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>metaSignedTx</td>
<td>The meta signed tx of the user</td>
</tr>
<tr>
<td>blockchain</td>
<td>Rinkeby, Ropsten or Kovan</td>
</tr>
</tbody></table>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.shipl.co/sensui/relay"</span>
  -H Authorization: Bearer &lt;jwt nisaba token&gt;
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">Web3</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'web3'</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">Shipl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fuel-web3-provider'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">readline</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'readline-sync'</span><span class="p">)</span> <span class="c1">// Callback to ask for the user phone number if the user isn't verified</span>

<span class="kr">const</span> <span class="nx">shipl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shipl</span><span class="p">({</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="na">network</span><span class="p">:</span> <span class="s1">'rinkeby'</span> <span class="p">})</span>
<span class="kr">const</span> <span class="p">{</span> <span class="nx">identity</span><span class="p">,</span> <span class="nx">deviceKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">shipl</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">readline</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">web3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Web3</span><span class="p">(</span><span class="nx">shipl</span><span class="p">.</span><span class="nx">start</span><span class="p">())</span>

<span class="kr">const</span> <span class="nx">dappContract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">Contract</span><span class="p">(</span><span class="nx">DAPP_CONTRACT_ADDRESS_ABI</span><span class="p">,</span> <span class="nx">DAPP_CONTRACT_ADDRESS</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">txHash</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">dappContract</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="p">{</span> <span class="na">from</span><span class="p">:</span> <span class="nx">deviceKey</span> <span class="p">})</span>

<span class="nx">dappContract</span><span class="p">.</span><span class="nx">methods</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">RANDOM_NUMBER</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span> <span class="na">from</span><span class="p">:</span> <span class="nx">deviceKey</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'transactionHash'</span><span class="p">,</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">transactionHash</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">shipl</span><span class="p">.</span><span class="nx">getInternalTransactionsData</span><span class="p">(</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">txHash</span><span class="p">)</span>
  <span class="p">})</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"txHash"</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;tx</span><span class="w"> </span><span class="err">hash&gt;</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h1 id='shipl-sdk'>Shipl SDK</h1><h2 id='getting-started'>Getting Started</h2>
<p>The Shipl SDK is an easy to embed module aimed to handle on-boarding for you and provide feesless transactions on the ethereum network. We’ve tried to keep things as simple/lightweight as possible.</p>

<p>This document is an implementation example for developers to understand end-user’s onboarding flow through the Shipl SDK.</p>
<h2 id='parties-involved'>Parties involved</h2>
<p>Shipl - Shipl is a service provider to you, our partner. We verify Users off-chain through a phone number verifcation. We serve meta-tx to the Users of the Business. We do not disclose their personal information unless in the event of a regulatory intervention as requested (e.g. subpoena, etc...).</p>

<p>Business - DEX, Dapps, etc. Likely this is you. You have users, some of which are verified via Shipl, some of which are not.</p>

<p>Users - DEX, Dapp end users. They are the ones getting verified and getting the experience from you. Shipl&#39;s part in this is purely to onboard them, and facilitate the ethereum transaction processing.</p>
<h2 id='installation'>Installation</h2>
<p>You can install the library via <code>npm</code>:</p>
<pre class="highlight sh tab-shell"><code><span class="gp">&gt; </span>npm i shipl
</code></pre><h2 id='usage'>Usage</h2>
<p>The package need to be configured with an ethereum private key or a web3 wallet instance (eg. Metamask)</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">Shipl</span> <span class="nx">from</span> <span class="s1">'shipl'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">shipl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shipl</span><span class="p">({</span>
    <span class="na">privateKey</span><span class="p">:</span> <span class="s2">"YOUR_PRIVATE_KEY"</span><span class="p">,</span> <span class="c1">// You can provide a private key to shipl</span>
    <span class="na">web3Provider</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">web3</span><span class="p">,</span> <span class="c1">// Or a web3 compatilbe wallet like Metamask</span>
    <span class="na">network</span><span class="p">:</span> <span class="s1">'rinkeby'</span> <span class="c1">// Can be rinkeby, ropsten or kovan (mainnet not available yet)</span>
<span class="p">})</span>
</code></pre>
<p>Then login into shipl. You have to pass an input callback to make the shipl SDK capable to ask for the phone number and then for the code verifcation send by SMS. For example on node you can use readline-sync. </p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="p">{</span> <span class="nx">identity</span><span class="p">,</span> <span class="nx">deviceKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">shipl</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">readline</span><span class="p">.</span><span class="nx">question</span><span class="p">)</span>
</code></pre>
<p>Then pass you can pass the shipl sdk into any web3 compatible library. Don&#39;t forget to execute the start function to launch the web3 provider.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">web3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Web3</span><span class="p">(</span><span class="nx">shipl</span><span class="p">.</span><span class="nx">start</span><span class="p">());</span>
</code></pre>
<p>Then you can call a contract in the regular web3 way</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">targetContract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">Contract</span><span class="p">(</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">contractAddress</span><span class="p">);</span>

<span class="nx">targetContract</span><span class="p">.</span><span class="nx">methods</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">'0x'</span> <span class="o">+</span> <span class="nx">config</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">send</span><span class="p">({</span>
    <span class="na">from</span><span class="p">:</span> <span class="s1">'0x'</span> <span class="o">+</span> <span class="nx">config</span><span class="p">.</span><span class="nx">address</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'transactionHash'</span><span class="p">,</span> <span class="nx">transactionHash</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'This the transactionHash'</span><span class="p">,</span> <span class="nx">transactionHash</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<p>Finnaly you can get the internal transaction data by passing the txHash and contract abi to the method below.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">internalTxDatas</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">shipl</span><span class="p">.</span><span class="nx">getInternalTransactionsData</span><span class="p">(</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">txHash</span><span class="p">)</span>
</code></pre><h3 id='browser-window-quick-start'>Browser Window Quick Start</h3>
<p>For use directly in the browser you can reference the shipl distribution files from a number of places. They can be found in our npm package in the &#39;dist&#39; folder or you can build them locally from this repo.</p>

<p>For a quick setup you may also request a remote copy from unpkg CDN as follows:</p>
<pre class="highlight html tab-html"><code><span class="c">&lt;!-- The most recent version  --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/shipl/dist/shipl.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- The most recent minified version  --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/shipl/dist/shipl.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- You can also fetch specific versions by specifying the version, files names may differ for past versions --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/shipl@&lt;version&gt;/dist/shipl.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
<p>To see all available dist files on unpkg, vist <a href="https://unpkg.com/shipl/dist">unpkg.com/shipl/dist</a></p>

<p>Then to instantiate the shipl object from the browser window object:</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">Shipl</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">shipl</span>
<span class="kr">const</span> <span class="nx">shipl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shipl</span><span class="p">({</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="nx">network</span> <span class="p">})</span>
</code></pre><h2 id='examples'>Examples</h2>
<p>For a more in depth guide, check out our documentation site or clone this repository and check out the sample apps in the <a href="https://github.com/shiplco/shipl-sdk/tree/master/examples/node-integration-tutorial">/examples</a> folder.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
